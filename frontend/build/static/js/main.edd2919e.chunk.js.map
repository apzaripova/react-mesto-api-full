{"version":3,"sources":["images/header__logo.svg","components/Header.js","components/Footer.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/PopupWithForm.js","utils/api.js","utils/auth.js","components/ImagePopup.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/Login.js","components/Register.js","components/ProtectedRoute.js","images/success.svg","images/failed.svg","components/InfoTooltip.js","components/App.js","index.js"],"names":["Header","loggedIn","email","onSignOut","className","src","logo","alt","exact","path","to","onClick","Footer","CurrentUserContext","React","createContext","Card","card","onCardClick","onCardDelete","onCardLike","currentUser","useContext","isOwn","owner","_id","cardDeleteButtonClassName","isLiked","likes","some","i","cardLikeButtonClassName","name","link","type","length","Main","onEditAvatar","onEditProfile","onAddPlace","cards","avatar","about","map","PopupWithForm","props","isOpen","id","onSubmit","title","children","submitButtonText","onClose","api","options","this","_url","baseUrl","_headers","headers","res","ok","json","Promise","reject","status","fetch","method","then","_handleOriginalResponse","item","body","JSON","stringify","firstname","job","all","getUserInfo","getCards","authorization","BASE_URL","handleOriginalResponse","ImagePopup","EditProfilePopup","onUpdateUser","useState","setName","description","setDescription","useEffect","e","preventDefault","placeholder","minLength","maxLength","required","value","onChange","target","EditAvatarPopup","onUpdateAvatar","inputValue","useRef","current","ref","AddPlacePopup","cardTitle","setCardTitle","cardLink","setCardLink","event","Login","handleAuthorization","setEmail","password","setPassword","Register","handleRegistration","ProtectedRoute","Component","component","InfoTooltip","isSuccess","success","failed","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isImagePopupOpen","setIsImagePopupOpen","setCards","setCurrentUser","selectedCard","setSelectedCard","setLoggedIn","isSuccessSignUp","setIsSuccesSignUp","isInfoTooltipOpen","setIsInfoTooltipOpen","history","useHistory","handleCheckToken","token","localStorage","getItem","Accept","Authorization","auth","data","push","catch","err","console","log","handleInfoTooltipPopupOpen","handleSignOut","removeItem","info","initialCards","closeAllPopups","Provider","setLike","newCard","state","c","deleteCard","filter","logout","setItem","onCheckToken","setUserInfo","newProfile","postCard","setUserAvatar","newAvatar","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.edd2919e.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/header__logo.03b78ada.svg\";","import React from 'react'\nimport logo from '../images/header__logo.svg'\nimport { Link, Route } from 'react-router-dom';\n\nexport default function Header({loggedIn, email, onSignOut}) {\n\n  \n  return (\n    <header className=\"header\"> \n\n      <img src={logo} alt=\"Логотип Место\" className=\"header__logo\" /> \n      <div className=\"header__login\"> \n      {loggedIn && (\n        <>\n        <p className=\"header__text\">{email}</p>\n          <Route exact path=\"/\">\n            <Link\n              to=\"/sign-in\"\n              className=\"header__button\"\n              onClick={onSignOut}\n            >\n              Выйти\n            </Link>\n          </Route>\n          </>\n        )}\n        <Route path=\"/sign-in\">\n          <Link to=\"/sign-up\" className=\"header__link\">\n            Регистрация\n          </Link>\n        </Route>\n        <Route path=\"/sign-up\">\n          <Link to=\"/sign-in\" className=\"header__link\">\n            Вход\n          </Link>\n        </Route>\n      </div> \n    </header> \n  );\n}","import React from 'react'\n\nexport default function Footer() {\n    return (\n        <footer className=\"footer\">\n            <p className=\"footer__text\">© 2020 Mesto Russia</p>\n        </footer>\n    )\n}","import React from 'react';\n\n\nexport const CurrentUserContext = React.createContext();","import React from 'react'\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\n\nexport default function Card({card, onCardClick, onCardDelete, onCardLike, }) {\n\n    const currentUser = React.useContext(CurrentUserContext);\n\n     //Определяем, являемся ли мы владельцем карточки\n    const isOwn = card.owner._id === currentUser._id;\n\n    //Переменная для класса кнопки удаления (если карточка наша -- видим иконку удаления)\n    const cardDeleteButtonClassName = (\n        `card__button-delete ${isOwn ? 'card__delete-button_visible' : 'card__button-delete_hidden'}`\n      );\n\n    // Определяем, есть ли у карточки лайк, поставленный текущим пользователем\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n\n    // Создаём переменную, которую после зададим в `className` для кнопки лайка\n    const cardLikeButtonClassName = (\n        `card__button-like ${isLiked ? 'card__button-like_active' : ''}`\n      );\n     \n    function handleClick() {\n        onCardClick(card);\n      }\n\n    function handleCardLike() {\n        onCardLike(card)\n      }\n\n      function handleDeleteCard() {\n        onCardDelete(card)\n      }\n\n    return (\n        <li className=\"card\">\n            <div className=\"card__container\">\n                            <img className=\"card__photo\" alt={card.name} src={card.link} onClick={handleClick} />\n                            <button className={cardDeleteButtonClassName} onClick={handleDeleteCard}></button>\n            </div>\n                        <div className=\"card__info\">\n                            <h2 className=\"card__title\">{card.name}</h2>\n                            <div className=\"card__container-like\">\n                                <button className={cardLikeButtonClassName} type=\"button\" aria-label=\"Лайк\" onClick={handleCardLike}></button>\n                                <span className=\"card__count-like\">{card.likes.length}</span>\n                            </div>\n                        </div>\n        </li>\n    )\n}","import React from 'react'\nimport Card from './Card'\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\n\nexport default function Main({ onEditAvatar, onEditProfile, onAddPlace, onCardClick, cards, onCardLike,\n    onCardDelete }) {\n\n    const currentUser = React.useContext(CurrentUserContext);\n\n    return (\n        <main className=\"content\">\n        <section className=\"profile\">\n                <div className=\"profile__avatar-container\"> \n                    <img className=\"profile__avatar\" \n                        src={currentUser.avatar}\n                        alt='Аватар пользователя'\n                    />\n                    <button className=\"profile__avatar-button profile__avatar\" aria-label=\"форма обновления аватара\" onClick={onEditAvatar}></button>\n                </div>\n                <div className=\"profile__intro\">\n                        <h1 className=\"profile__name\">{currentUser.name}</h1>\n                        <button className=\"profile__button-edit\" type=\"button\" aria-label=\"Редактировать профиль\" onClick={onEditProfile}></button>\n                    <p className=\"profile__description\">{currentUser.about}</p>\n                </div>\n            <button className=\"profile__add-button\" type=\"button\" aria-label=\"Добавить карточку\" onClick={onAddPlace}></button>\n        </section>\n        <section className=\"cards\">\n        <ul className=\"cards__list\">\n            {cards.map(card => (\n                <Card \n                key={card._id}\n                card={card}\n                onCardClick={ onCardClick }\n                onCardLike={ onCardLike }\n                onCardDelete={ onCardDelete } \n            />\n            )\n            )}\n        </ul>\n        </section>\n    </main>\n    )\n}","import React from 'react'\n\nexport default function PopupWithForm(props) {\n    return (\n        <div className={props.isOpen ? 'popup popup_active' : 'popup'} id={props.name}>\n            <form className=\"popup__container\" onSubmit={props.onSubmit}>\n                <h2 className=\"popup__profile\">{props.title}</h2>\n                {props.children}\n                <button type=\"submit\" className=\"popup__button\">{props.submitButtonText}</button>\n                <button type=\"button\" className=\"popup__close-button\" onClick={props.onClose}></button>\n            </form>\n        </div>\n    )\n}","class Api {\n    constructor(options) {\n        this._url = options.baseUrl;\n        this._headers = options.headers;\n    }\n\n    _handleOriginalResponse(res) {\n        if (!res.ok) {\n            return Promise.reject(`Error: ${res.status}`);\n        }\n\n        return res.json();\n    }\n\n    getUserInfo() {\n        return fetch(`${this._url}/users/me`, {\n          method: 'GET',\n          headers: this._headers\n        }).then(this._handleOriginalResponse)\n      }\n\n    setUserAvatar(item) {\n        return fetch(`${this._url}/users/me/avatar`, {\n          method: 'PATCH',\n          headers: this._headers,\n          body: JSON.stringify({\n            avatar: item.avatar\n          })\n        }).then(this._handleOriginalResponse)\n      }\n\n    getCards() {\n        return fetch(`${this._url}/cards`, {\n          method: 'GET',\n          headers: this._headers\n        }).then(this._handleOriginalResponse)\n      }\n\n      postCard(item) {\n        return fetch(`${this._url}/cards`, {\n          method: 'POST',\n          headers: this._headers,\n          body: JSON.stringify({\n            name: item.name,\n            link: item.link\n          })\n        }).then(this._handleOriginalResponse)\n      }\n\n    deleteCard(id) {\n        return fetch(`${this._url}/cards/${id}`, {\n          method: 'DELETE',\n          headers: this._headers\n        }).then(this._handleOriginalResponse)\n      }\n\n    setLike(id) {\n        return fetch(`${this._url}/cards/likes/${id}`, {\n          method: 'PUT',\n          headers: this._headers\n        }).then(this._handleOriginalResponse)\n      }\n\n    deleteLike(id) {\n        return fetch(`${this._url}/cards/likes/${id}`, {\n          method: 'DELETE',\n          headers: this._headers\n        }).then(this._handleOriginalResponse)\n      }\n\n    setUserInfo(item) {\n        return fetch(`${this._url}/users/me`, {\n          method: 'PATCH',\n          headers: this._headers,\n          body: JSON.stringify({\n            name: item.firstname,\n            about: item.job\n          })\n        }).then(this._handleOriginalResponse)\n      }\n\n      getInitialItem() {\n        return Promise.all([this.getUserInfo(), this.getCards()]);\n      }\n}\n\nconst api = new Api({\n  baseUrl: 'https://api.domainname.mesto.nomoredomains.rocks',\n  headers: {\n  authorization: '7756de4b-55ba-47f8-9f76-db9dfc9e3dd4',\n    'Content-Type': 'application/json'\n  }\n});\n\nexport default api;","export const BASE_URL = \"https://api.domainname.mesto.nomoredomains.rocks\";\n\nconst handleOriginalResponse = (res) =>\n  res.ok ? res.json() : Promise.reject(`Ошибка: ${res.status}`);\n\nexport const register = (email, password) => {\n  return fetch(`${BASE_URL}/signup`, {\n    method: \"POST\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({ email, password }),\n  }).then(handleOriginalResponse);\n};\n\nexport const authorize = ({ password, email }) => {\n  return fetch(`${BASE_URL}/signin`, {\n    method: \"POST\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({ email, password }),\n  }).then(handleOriginalResponse);\n};\n\nexport const checkToken = (token) => {\n  return fetch(`${BASE_URL}/users/me`, {\n    method: \"GET\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${token}`,\n    },\n  }).then(handleOriginalResponse);\n};","import React from 'react'\n\nexport default function ImagePopup({onClose, card, isOpen}) { \n    return (\n        <div className={isOpen ? 'popup popup_active': 'popup'} id=\"open-image\">\n        <div className=\"popup__image-container popup__container_image\">\n            <button className=\"popup__close-button\" id=\"closeImage\" type=\"button\" aria-label=\"Закрыть открытие карточки\" onClick={onClose}></button>\n            <img className=\"popup__picture\" src={card.link} alt={card.name} />\n            <figcaption className=\"popup__figcaption\">{card.name}</figcaption>\n        </div>\n    </div>\n    )\n}","import React from 'react';\nimport PopupWithForm from './PopupWithForm';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nexport default function EditProfilePopup({isOpen, onClose, onUpdateUser}) {\n\n    const [name, setName] = React.useState('');\n    const [description, setDescription] = React.useState('');\n    const currentUser = React.useContext(CurrentUserContext);\n\n    function handleNameChange(e) {\n      setName(e.target.value);\n    }\n  \n    function handleDescriptionChange(e) {\n      setDescription(e.target.value);\n    }\n\n    function handleSubmit(e) {\n        // Запрещаем браузеру переходить по адресу формы\n        e.preventDefault();\n      \n        // Передаём значения управляемых компонентов во внешний обработчик\n        onUpdateUser({\n          name,\n          about: description,\n        });\n      }\n\n    React.useEffect(() => {\n        setName(currentUser.name);\n        setDescription(currentUser.about);\n      }, [currentUser, isOpen]);\n\n    return (\n        <PopupWithForm  title=\"Редактировать профиль\" submitButtonText=\"Сохранить\"  name=\"profileEdit\" isOpen={isOpen} onClose={onClose} onSubmit={handleSubmit}>\n              <input className=\"popup__input popup__input_type_name\" \n                        id=\"input-name\" \n                        type=\"text\" \n                        placeholder=\"Имя\" \n                        name=\"firstname\" \n                        minLength=\"2\" \n                        maxLength=\"40\" \n                        required \n                        value={name || ''} \n                        onChange={handleNameChange}/>  \n              <span className=\"popup__input-error input-name-error\"></span>\n              <input className=\"popup__input popup__input_type_job \" \n                        id=\"input-job\" \n                        type=\"text\" \n                        placeholder=\"О себе\" \n                        name=\"job\" \n                        minLength=\"2\" \n                        maxLength=\"200\" \n                        required \n                        value={description || ''} \n                        onChange={handleDescriptionChange}/>\n              <span className=\"popup__input-error input-job-error\"></span>\n        </PopupWithForm>\n    )\n}","import React from 'react';\nimport PopupWithForm from './PopupWithForm';\n\n\nexport default function EditAvatarPopup({isOpen, onClose, onUpdateAvatar}) {\n    const inputValue = React.useRef();\n\n    function handleSubmit(e) {\n        e.preventDefault();\n        onUpdateAvatar({\n            avatar: inputValue.current.value\n        });\n    }\n\n    return (\n        <PopupWithForm  title=\"Обновить аватар\" submitButtonText=\"Сохранить\" name=\"avatarUpdate\" onSubmit={handleSubmit} isOpen={isOpen} onClose={onClose}>\n                    <input ref={inputValue} className=\"popup__input\" type=\"url\" id=\"input-avatar\" placeholder=\"Ссылка на картинку\" name=\"avatar\" required />\n                    <span className=\"popup__input-error input-avatar-error\"></span>\n        </PopupWithForm>\n    )\n}","import React from 'react';\nimport PopupWithForm from './PopupWithForm';\nimport { useState, useEffect } from 'react';\n\n\nexport default function AddPlacePopup({isOpen, onClose, onAddPlace}) {\n\n    const [cardTitle, setCardTitle] = useState('');\n    const [cardLink, setCardLink] = useState('');\n\n  //Обработчик установки названия места\n  function handleCardTitle(event) {\n    setCardTitle(event.target.value)\n  }\n\n  //Обработчик установки картинки (ссылки на картинку)\n  function handleCardLink(event) {\n    setCardLink(event.target.value)\n  }\n\n    function handleSubmit(event) {\n        event.preventDefault();\n    \n        onAddPlace({\n          name: cardTitle,\n          link: cardLink\n        })\n      }\n\n      useEffect(() => {\n        setCardLink('')\n        setCardTitle('')\n      }, [isOpen])\n\n    return (\n        <PopupWithForm  title=\"Новое место\" submitButtonText=\"Создать\" name=\"newCard\" isOpen={isOpen} onClose={onClose} onSubmit={handleSubmit}>\n                    <input className=\"popup__input popup__input_type_title\" \n                    id=\"input-title\" \n                    type=\"text\" \n                    placeholder=\"Название\" \n                    name=\"name\" \n                    minLength=\"2\" \n                    maxLength=\"30\" \n                    required \n                    onChange={handleCardTitle}\n                    value={cardTitle ? cardTitle : ''} />\n                    <span className=\"popup__input-error input-title-error\"></span>\n                    <input className=\"popup__input popup__input_type_link\" \n                    id=\"input-link\" \n                    type=\"url\" \n                    placeholder=\"Ссылка на картинку\" \n                    name=\"link\" \n                    required \n                    onChange={handleCardLink}\n                    value={cardLink ? cardLink : ''}/>\n                    <span className=\"popup__input-error input-link-error\"></span>\n        </PopupWithForm>\n    )\n}","import React, { useState } from 'react';\n\nexport default function Login({handleAuthorization}) {\n\n    const [email, setEmail] = useState('');\n    const [password, setPassword] = useState('');\n\n    function handleAddEmail(e) {\n        setEmail(e.target.value);\n    }\n\n    function handleAddPassword(e) {\n        setPassword(e.target.value);\n    }\n\n    function handleSubmit(e) {\n        e.preventDefault();\n        handleAuthorization({ password, email });\n    }\n    return (\n        <div className=\"popup__auth\">\n            <form className=\"popup-form popup-form_auth\" onSubmit={handleSubmit}>\n                <h2 className=\"popup__profile popup__profile_auth\">Вход</h2>\n                <input className=\"popup__input popup__input_type_login\" onChange={handleAddEmail} value={email} type=\"email\" placeholder=\"Email\" id=\"auth-email\" required maxLength=\"40\" minLength=\"1\"></input>\n                <span className=\"popup__input-error input-email-error\"></span>\n                <input className=\"popup__input popup__input_type_login\" onChange={handleAddPassword} value={password} type=\"password\" placeholder=\"Пароль\" id=\"auth-password\" required maxLength=\"40\" minLength=\"2\"></input>\n                <span className=\"popup__input-error input-password-error\"></span>\n                <button className=\"popup__button popup__button_auth\">Войти</button>\n            </form>\n        </div>\n    )\n}","import React from 'react';\nimport {Link, Route} from \"react-router-dom\";\n\nexport default function Register(props) {\n\n    const [email, setEmail] = React.useState('');\n    const [password, setPassword] = React.useState('');\n\n    function handleAddEmail(e) {\n        setEmail(e.target.value);\n    }\n\n    function handleAddPassword(e) {\n        setPassword(e.target.value);\n    }\n\n    function handleSubmit(e) {\n        e.preventDefault();\n        props.handleRegistration(email, password);\n    }\n\n\n    return (\n        <div className=\"popup__auth\">\n            <form className=\"popup-form popup-form_auth\" onSubmit={handleSubmit}>\n                <h2 className=\"popup__profile popup__profile_auth\">Регистрация</h2>\n                <input className=\"popup__input popup__input_type_login\" onChange={handleAddEmail} value={email} type=\"email\" placeholder=\"Email\" id=\"auth-email\" required maxLength=\"40\" minLength=\"1\"></input>\n                <input className=\"popup__input popup__input_type_login\" onChange={handleAddPassword} value={password} type=\"password\" placeholder=\"Пароль\" id=\"auth-password\" required maxLength=\"40\" minLength=\"2\"></input>\n                <button className=\"popup__button popup__button_auth\">Зарегистрироваться</button>\n                <p className=\"popup__login-text\">Уже зарегистрированы?\n                <Route path=\"/sign-up\">\n                        <Link className=\"popup__text-link button\" to=\"/sign-in\">\n                            {' '}Войти\n                        </Link>\n                </Route>\n                </p>\n            </form>\n        </div>\n    )\n}","import React from 'react';\nimport { Route, Redirect } from 'react-router-dom';\n\nexport default function ProtectedRoute({ component: Component, ...props }) {\n    return (\n      <Route>\n        {props.loggedIn ? <Component {...props} /> : <Redirect to=\"/sign-in\" />}\n      </Route>\n    )\n  }","export default __webpack_public_path__ + \"static/media/success.1b6082f8.svg\";","export default __webpack_public_path__ + \"static/media/failed.df8eddf6.svg\";","import React from 'react';\nimport success from '../images/success.svg';\nimport failed from '../images/failed.svg';\n\nexport default function InfoTooltip({ isOpen, onClose, isSuccess}) {\n    return (\n        <>\n      <div className={isOpen ? 'popup popup_active' : 'popup'}>\n        <div className=\"popup__container popup__container_status\">\n          <button type=\"button\"\n                  className=\"popup__close-button\"\n                  onClick={onClose}\n          />\n          <img className=\"popup__image-status\"\n               src={`${isSuccess ? success : failed}`}\n               alt=\"Изображение статуса регистрации\"\n          />\n          <h2 className=\"popup__profile popup__profile_status\">\n          {`${\n          isSuccess\n            ? \"Вы успешно зарегистрировались!\"\n            : \"Что-то пошло не так! Попробуйте еще раз.\"\n        }`}\n          </h2>\n        </div>\n      </div>\n    </>\n    )\n}","import React, { useState } from 'react'\nimport Header from './Header'\nimport Footer from './Footer'\nimport Main from './Main'\nimport PopupWithForm from'./PopupWithForm'\nimport api from '../utils/api'\nimport * as auth from '../utils/auth';\nimport ImagePopup from './ImagePopup'\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\nimport EditProfilePopup from './EditProfilePopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport AddPlacePopup from './AddPlacePopup';\nimport { Route, Switch, useHistory, Redirect } from 'react-router-dom';\nimport Login from './Login';\nimport Register from './Register';\nimport ProtectedRoute from './ProtectedRoute';\nimport InfoTooltip from './InfoTooltip';\n\nfunction App() {\n    const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n    const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n    const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n    const [isImagePopupOpen, setIsImagePopupOpen] = React.useState(false);\n    const [cards, setCards] = React.useState([]);\n    const [currentUser, setCurrentUser] = React.useState({});\n    const [selectedCard, setSelectedCard] = React.useState({\n        link: '',\n        name: ''\n      });\n    const [loggedIn, setLoggedIn] = React.useState(false);\n    const [email, setEmail] = useState('');\n    const [isSuccessSignUp, setIsSuccesSignUp] = React.useState(false);\n    const [isInfoTooltipOpen, setIsInfoTooltipOpen] = React.useState(false);\n    const history = useHistory();\n\n    React.useEffect(() => {\n        Promise.all([api.getUserInfo(), api.getCards()])\n          .then(([info, initialCards]) => {\n            setCurrentUser(info)\n            setCards(initialCards)\n          })\n          .catch((err) => {\n            console.log(err);\n          })\n        }, []);\n\n    function handleCheckToken () {\n        const token = localStorage.getItem('jwt');\n        if (token) {\n          auth.checkToken(token)\n          .then((res) => {\n            if(res.data.email) {\n              setEmail(res.data.email)\n              setLoggedIn(true)\n              history.push('/')\n            }\n          })\n          .catch((err) => {\n            console.log(err)\n          });\n        }\n      }\n\n  \n    React.useEffect(() => {\n      handleCheckToken();\n    }, []);\n\n   \n\n    const handleEditProfileClick = () => {\n        setIsEditProfilePopupOpen(true);\n    };\n    const handleEditAvatarClick = () => {\n        setIsEditAvatarPopupOpen(true);\n    };\n    const handleAddPlaceClick = () => {\n        setIsAddPlacePopupOpen(true);\n    };\n\n    function handleCardClick(card) {\n      setSelectedCard(card);\n      setIsImagePopupOpen(!isImagePopupOpen);\n    }\n\n    function handleInfoTooltipPopupOpen() {\n      setIsInfoTooltipOpen(!isInfoTooltipOpen);\n    }\n\n    function handleLikeCard(card) {\n      // Снова проверяем, есть ли уже лайк на этой карточке\n      const isLiked = card.likes.some(i => i._id === currentUser._id);\n      \n      // Отправляем запрос в API и получаем обновлённые данные карточки\n      api.setLike(card._id, !isLiked).then((newCard) => {\n          setCards((state) => state.map((c) => c._id === card._id ? newCard : c));\n      })\n      .catch((err) => {\n        console.log(`Ошибка лайка: ${err}`);\n      })\n  }\n\n  \n  function handleDeleteClick(card) {\n    api.deleteCard(card._id)\n      .then(() => {\n        setCards(cards.filter(item => item._id !== card._id));\n      })\n      .catch(err => console.log(err));\n  }\n\n  const handleUpdateUser = (item) => {\n    api.setUserInfo(item)\n    .then((newProfile) => {\n      setCurrentUser(newProfile);\n      closeAllPopups();\n    })\n    .catch((err) => {\n      console.log(`Ошибка обновления профиля: ${err}`);\n    })\n  }\n\n  const handleUpdateAvatar = (item) => {\n    api.setUserAvatar(item)\n    .then((newAvatar) => {\n      setCurrentUser(newAvatar);\n      closeAllPopups();\n    })\n    .catch((err) => {\n      console.log(`Ошибка создания карточки: ${err}`);\n    })\n  }\n\n  const handleAddPlace = (item) => {\n    api.postCard(item)\n    .then((newCard) => {\n        setCards([newCard, ...cards]);\n        closeAllPopups();\n    })\n    .catch((err) => {\n      console.log(`Ошибка создания карточки: ${err}`);\n    })\n  }\n  \n\n  //регистрация\n  function handleRegistration(email, password) {\n    auth.register(email, password)\n    .then((res) => {\n      if (res.data) {\n        setIsSuccesSignUp(true)\n        handleInfoTooltipPopupOpen();\n        history.push('/sign-in')\n      }\n    })\n    .catch((err) => {\n      console.log(err)\n      setIsSuccesSignUp(false);\n      handleInfoTooltipPopupOpen();\n    });\n  }\n\n\n  //авторизация\n  function handleAuthorization({email, password}) {\n    auth.authorize({email, password})\n    .then((res) => {\n      if (res.token) {\n        setEmail(email)\n        setLoggedIn(true);\n        setIsSuccesSignUp(true)\n        localStorage.setItem('jwt', res.token)\n        history.push('/')\n      }\n    })\n    .catch((err) => {\n      console.log(err)\n    })\n  }\n\n\n  //выход из учетной записи\n  function handleSignOut() {\n    localStorage.removeItem('jwt');\n    setEmail('');\n    setLoggedIn(false);\n    history.push('/sign-in');\n  }\n\n  const closeAllPopups = () => {\n    setIsEditProfilePopupOpen(false);\n    setIsEditAvatarPopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsImagePopupOpen(false);\n    setIsInfoTooltipOpen(false);\n    setSelectedCard({\n        link: '',\n        name: ''\n      })\n  };\n\n\n  \n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n        <div className=\"page\">\n        <Header email={email} loggedIn={loggedIn} onSignOut={handleSignOut} /> \n        <Switch>\n          <ProtectedRoute\n                exact path=\"/\" \n                component={Main}\n                onEditProfile={handleEditProfileClick} \n                onAddPlace={handleAddPlaceClick} \n                onEditAvatar={handleEditAvatarClick} \n                onCardClick={handleCardClick} \n                cards={cards}\n                onCardLike={handleLikeCard}\n                onCardDelete={handleDeleteClick}\n                loggedIn={loggedIn}\n                logout={handleSignOut}\n                />\n          <Route path=\"/sign-up\">\n            <Register handleRegistration={handleRegistration} />\n          </Route>\n          <Route path=\"/sign-in\">\n            <Login handleAuthorization={handleAuthorization}\n                  onCheckToken={handleCheckToken} />\n          </Route>\n          <Route path=\"/\">\n            {loggedIn ? <Redirect to=\"/\" /> : <Redirect to=\"/sign-in\" />}\n          </Route>\n        </Switch>\n        <Footer />\n        <EditProfilePopup isOpen={isEditProfilePopupOpen} onClose={closeAllPopups} onUpdateUser={handleUpdateUser} />\n        <AddPlacePopup isOpen={isAddPlacePopupOpen} onClose={closeAllPopups} onAddPlace={handleAddPlace}/>\n        <PopupWithForm  title=\"Вы уверены?\" name=\"confirmPopup\" submitButtonText=\"Да\" isOpen={false} onClose={closeAllPopups} />\n        <EditAvatarPopup isOpen={isEditAvatarPopupOpen} onClose={closeAllPopups} onUpdateAvatar={handleUpdateAvatar}/>\n        <ImagePopup\n          card={selectedCard}\n          onClose={closeAllPopups}\n          isOpen={isImagePopupOpen}\n        />\n        <InfoTooltip\n          isOpen={isInfoTooltipOpen}\n          onClose={closeAllPopups}\n          isSuccess={isSuccessSignUp}\n      />\n    </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport App from './components/App';\nimport './index.css';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}